(this["webpackJsonpship-stabi"]=this["webpackJsonpship-stabi"]||[]).push([[15],{196:function(e,a,t){"use strict";t.r(a);var r=t(95),s=t.n(r),n=t(97),l=t(26),o=t(1),c=t(10),i=t(11),d=t(13),m=t(12),u=t(0),p=t.n(u),f=t(24),h=t(141),E=t(186),b=t(126),N=t(214),y=t(23),v=t(98),O=t(82),C=t.n(O),U=t(83),g=t.n(U),j=t(100),w=t.n(j),S=t(59),L=t(85),R=t(70),A=t.n(R),I=t(71),P=t.n(I),x=t(64),F=t(3),k=function(e){return{type:F.r,userList:e}},D=function(e){return{type:F.G,recordUpdateStatus:e}},V=function(e){return{type:F.k,error:e}},G=function(){return{type:F.f}},M={headers:{}},H=function(e){return function(a){A.a.post(x.a+"".concat("Employee","/AddEmployee"),e,M).then((function(e){var t;0===e.data.status?(a((t=e.data.message,{type:F.E,recordSaveStatus:t})),a(G())):(a(V(e.data.message)),a(G()))})).catch((function(e){console.log(e),e.response?(a(V(e.response.data.message||"ERROR")),a(G())):(a(V("API Error. Please contact administrator.")),a(G()))}))}},K=t(76),_=function(e){Object(d.a)(t,e);var a=Object(m.a)(t);function t(){var e;return Object(c.a)(this,t),(e=a.call(this)).sweetAlertHandler=function(e){g()(C.a).fire({title:e.title,text:e.text,type:e.type})},e.handleDelete=function(a){var t=g()(C.a);t.fire({title:"Are you sure?",text:"Once deleted, you will not be able to recover this user!",type:"warning",showCloseButton:!0,showCancelButton:!0}).then((function(r){if(!r.value)return t.fire("","Your user record is safe!","info");var s=e.state.data.find((function(e){return e.ID===a})),n={ID:a};e.props.deletUser(n);var l=e.state.data.indexOf(s);l>-1&&e.state.data.splice(l,1),e.setState({data:e.state.data})})).finally((function(){e.setState({isOpen:!0})}))},e.handleEdit=function(a){var t=e.state.data.find((function(e){return e.ID===a})),r={ID:a,EmployeeNumber:t.EmployeeNumber,FirstName:t.FirstName,MiddleName:t.MiddleName,LastName:t.LastName};t.IsUser&&(e.setState({isSystemUser:!0}),r=Object(o.a)(Object(o.a)({},r),{},{UserName:t.UserName,UserRole:!0===t.IsAdmin?"Admin":"User"})),e.setState({userObj:r,isEditUserCode:!1}),e.setState({isSearch:!1,isAdd:!0}),window.scrollTo({top:0,behavior:"smooth"})},e.handleAddUser=function(a){e.clearValue(a),e.setState({isSearch:!1,isAdd:!0})},e.handleIsSystemUser=function(a){e.setState({isSystemUser:!0})},e.handleIsNormalUser=function(a){e.setState({isSystemUser:!1})},e.handleCloseAddUser=function(a){e.clearValue(a),e.setState({isSearch:!0,isAdd:!1,isSystemUser:!1})},e.handleFormChange=function(a,t,r,s){try{var n=a.target,c=n.name,i=n.value;e.setState(Object(l.a)({},t,Object(o.a)(Object(o.a)({},e.state[t]),{},Object(l.a)({},c,i))))}catch(d){console.log(d)}},e.clearValue=function(a){e.setState({userObj:{ID:"",EmployeeNumber:"",FirstName:"",MiddleName:"",LastName:"",UserName:"",Password:"",ConfPassword:"",UserRole:"",Vessel:""},isEditUserCode:!0,isSystemUser:!1})},e.handleSubmit=Object(n.a)(s.a.mark((function a(){var t,r;return s.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:Object(S.a)(e.state.userObj.ID)?Object(S.a)(e.state.userObj.EmployeeNumber)?e.sweetAlertHandler({title:"Error",text:"Please fill all required fileds",type:"error"}):(C.a.showLoading(),(t=new FormData).append("EmployeeNumber",e.state.userObj.EmployeeNumber),t.append("FirstName",e.state.userObj.FirstName),t.append("MiddleName",e.state.userObj.MiddleName),t.append("LastName",e.state.userObj.LastName),t.append("IsUser",!!e.state.isSystemUser),t.append("IsLocked",!1),t.append("IsActive",!0),t.append("Vessel",e.state.userObj.Vessel),!e.state.isSystemUser||Object(S.a)(e.state.userObj.Password)||Object(S.a)(e.state.userObj.ConfPassword)?e.state.isSystemUser?e.sweetAlertHandler({title:"Error",text:"Please enter password and confirm password",type:"error"}):e.props.saveSingleUser(t):(t.append("UserName",e.state.userObj.UserName),t.append("Password",e.state.userObj.Password),t.append("IsAdmin","Admin"===e.state.userObj.UserRole),e.state.userObj.Password===e.state.userObj.ConfPassword?e.props.saveSingleUser(t):e.sweetAlertHandler({title:"Error",text:"Confirm password not match with password",type:"error"}))):(C.a.showLoading(),(r=new FormData).append("ID",e.state.userObj.ID),r.append("EmployeeNumber",e.state.userObj.EmployeeNumber),r.append("FirstName",e.state.userObj.FirstName),r.append("MiddleName",e.state.userObj.MiddleName),r.append("LastName",e.state.userObj.LastName),r.append("IsUser",!!e.state.isSystemUser),r.append("IsLocked",!1),r.append("IsActive",!0),r.append("Vessel",e.state.userObj.Vessel),e.state.isSystemUser?(r.append("UserName",e.state.userObj.UserName),r.append("IsAdmin","Admin"===e.state.userObj.UserRole),Object(S.a)(e.state.userObj.Password)||Object(S.a)(e.state.userObj.ConfPassword)?e.props.updateSingleUser(r):(r.append("Password",e.state.userObj.Password),e.state.userObj.Password===e.state.userObj.ConfPassword?e.props.updateSingleUser(r):e.sweetAlertHandler({title:"Error",text:"Confirm password not match with password",type:"error"}))):e.props.updateSingleUser(r));case 1:case"end":return a.stop()}}),a)}))),e.state={data:[],isSearch:!0,isAdd:!1,userObj:"",isEditUserCode:!0,isSystemUser:!1,vesselList:[]},e.columns=[{name:"ID",selector:"ID",omit:!0},{name:"Actions",cell:function(a){return p.a.createElement(p.a.Fragment,null,p.a.createElement(h.a,{className:"btn btn-sm btn-info mr-1",outline:!0,onClick:function(){return e.handleEdit(a.ID)}},p.a.createElement("i",{className:"fa fa-edit"})),p.a.createElement(h.a,{className:"btn btn-sm btn-dark",outline:!0,onClick:function(){return e.handleDelete(a.ID)}},p.a.createElement("i",{className:"fa fa-trash"})))}},{name:"User Code",selector:"EmployeeNumber"},{name:"Full Name",selector:"FullName"},{name:"Username",selector:"UserName"},{name:"User Role",cell:function(e){return p.a.createElement(p.a.Fragment,null,!0===e.IsAdmin?p.a.createElement("span",{className:"badge badge-info"},"Admin"):p.a.createElement("span",{className:"badge badge-dark"},"User"))}}],e}return Object(i.a)(t,[{key:"componentWillReceiveProps",value:function(e){Object(S.a)(e.userList)||this.setState({data:e.userList}),Object(S.a)(e.recordSaveStatus)||(this.sweetAlertHandler({title:"Success",text:e.recordSaveStatus,type:"success"}),setTimeout((function(){window.location.reload(!1)}),1800)),Object(S.a)(e.vesselList)||this.setState({vesselList:e.vesselList}),Object(S.a)(e.recordUpdateStatus)||(this.sweetAlertHandler({title:"Success",text:e.recordUpdateStatus,type:"success"}),setTimeout((function(){window.location.reload(!1)}),1800)),Object(S.a)(e.error)||this.sweetAlertHandler({title:"Error",text:e.error,type:"error"})}},{key:"componentDidMount",value:function(){this.props.getAllUserList(),this.props.getAllVesselList()}},{key:"render",value:function(){var e=this,a=this.state,t=a.isSearch,r=a.isAdd,s=a.userObj,n=a.isEditUserCode,l=a.isSystemUser,c=a.vesselList,i=(a.Vessel,this.columns.map((function(a){return a.editable?Object(o.a)(Object(o.a)({},a),{},{onCell:function(a){return{record:a,editing:e.isEditing(a)}}}):a})));return p.a.createElement(y.a,null,p.a.createElement(E.a,null,p.a.createElement(b.a,null,t&&p.a.createElement(v.a,{title:"Search User"},p.a.createElement(N.a.Row,null,p.a.createElement(N.a.Group,{as:b.a,md:"3"},p.a.createElement(N.a.Label,null,"User Code"),p.a.createElement(N.a.Control,{type:"text",id:"EmployeeNumber",placeholder:"User Code"})),p.a.createElement(N.a.Group,{as:b.a,md:"3"},p.a.createElement(N.a.Label,null,"User Name"),p.a.createElement(N.a.Control,{type:"text",id:"UserName",placeholder:"User Name"})),p.a.createElement(N.a.Group,{as:b.a,md:"3"},p.a.createElement(N.a.Label,null,"Full Name"),p.a.createElement(N.a.Control,{type:"text",id:"FullName",placeholder:"Full Name"})),p.a.createElement(N.a.Group,{as:b.a,md:"3"},p.a.createElement(N.a.Label,null,"User Role"),p.a.createElement(N.a.Control,{type:"text",id:"IsAdmin",placeholder:"User Role"}))),p.a.createElement(N.a.Row,null,p.a.createElement(N.a.Group,{as:b.a,md:"12"},p.a.createElement("center",null,p.a.createElement(h.a,{type:"button",style:{minWidth:"200px"},variant:"info",className:"m-3",disabled:!0},"Search"),p.a.createElement(h.a,{style:{minWidth:"200px"},variant:"dark",className:"m-3",disabled:!0},"Clear"))))),r&&p.a.createElement(v.a,{title:"Manage User"},p.a.createElement(N.a.Row,null,p.a.createElement(N.a.Group,{style:{display:"none"}},p.a.createElement(N.a.Label,null,"ID"),p.a.createElement(N.a.Control,{type:"text",id:"ID",name:"ID",onChange:function(a){return e.handleFormChange(a,"userObj")},value:s.ID})),p.a.createElement(N.a.Group,{as:b.a,md:"3"},p.a.createElement(N.a.Label,null,"User Code"),p.a.createElement(N.a.Control,{type:"text",id:"EmployeeNumber",name:"EmployeeNumber",placeholder:"User Code",onChange:function(a){return e.handleFormChange(a,"userObj")},value:s.EmployeeNumber,disabled:!n})),p.a.createElement(N.a.Group,{as:b.a,md:"3"},p.a.createElement(N.a.Label,null,"First Name"),p.a.createElement(N.a.Control,{type:"text",id:"FirstName",name:"FirstName",placeholder:"First Name",onChange:function(a){return e.handleFormChange(a,"userObj")},value:s.FirstName})),p.a.createElement(N.a.Group,{as:b.a,md:"3"},p.a.createElement(N.a.Label,null,"Middle Name"),p.a.createElement(N.a.Control,{type:"text",id:"MiddleName",name:"MiddleName",placeholder:"Middle Name",onChange:function(a){return e.handleFormChange(a,"userObj")},value:s.MiddleName})),p.a.createElement(N.a.Group,{as:b.a,md:"3"},p.a.createElement(N.a.Label,null,"Last Name"),p.a.createElement(N.a.Control,{type:"text",id:"LastName",name:"LastName",placeholder:"Last Name",onChange:function(a){return e.handleFormChange(a,"userObj")},value:s.LastName})),!l&&p.a.createElement(h.a,{className:"btn btn-sm btn-info",onClick:function(a){return e.handleIsSystemUser(a)}},"Is System User"),l&&p.a.createElement(h.a,{className:"btn btn-sm btn-dark",onClick:function(a){return e.handleIsNormalUser(a)}},"Is Normal User")),l&&p.a.createElement(p.a.Fragment,null,p.a.createElement("hr",null),p.a.createElement(N.a.Row,null,p.a.createElement(N.a.Group,{as:b.a,md:"3"},p.a.createElement(N.a.Label,null,"Username"),p.a.createElement(N.a.Control,{type:"text",id:"UserName",name:"UserName",placeholder:"Username",onChange:function(a){return e.handleFormChange(a,"userObj")},value:s.UserName})),p.a.createElement(N.a.Group,{as:b.a,md:"3"},p.a.createElement(N.a.Label,null,"Password"),p.a.createElement(N.a.Control,{type:"password",id:"Password",name:"Password",placeholder:"Password",onChange:function(a){return e.handleFormChange(a,"userObj")}})),p.a.createElement(N.a.Group,{as:b.a,md:"3"},p.a.createElement(N.a.Label,null,"Confirm Password"),p.a.createElement(N.a.Control,{type:"password",id:"ConfPassword",name:"ConfPassword",placeholder:"Confirm Password",onChange:function(a){return e.handleFormChange(a,"userObj")}})),p.a.createElement(N.a.Group,{as:b.a,md:"3"},p.a.createElement(N.a.Label,null,"User Role"),p.a.createElement("select",{className:"form-control add_task_todo",onChange:function(a){return e.handleFormChange(a,"userObj")},name:"UserRole",id:"UserRole",value:s.UserRole},p.a.createElement("option",{value:""},"Select User Role"),p.a.createElement("option",{value:"Admin"},"Admin"),p.a.createElement("option",{value:"User"},"User"))),p.a.createElement(N.a.Group,{as:b.a,md:"3"},p.a.createElement(N.a.Label,null,"Vessel"),p.a.createElement("select",{className:"form-control add_task_todo",onChange:function(a){return e.handleFormChange(a,"userObj")},name:"Vessel",id:"Vessel",value:s.vesselName},p.a.createElement("option",{value:""},"Select Vessel Name"),!Object(S.a)(c)&&c.map((function(e,a){return p.a.createElement("option",{key:a,value:e.ID},e.VesselName)})))))),p.a.createElement(N.a.Row,null,p.a.createElement(N.a.Group,{as:b.a,md:"12"},p.a.createElement("center",null,p.a.createElement(h.a,{type:"button",style:{minWidth:"200px"},variant:"info",className:"m-3",onClick:this.handleSubmit},"Save"),p.a.createElement(h.a,{style:{minWidth:"200px"},variant:"dark",className:"m-3",onClick:function(a){return e.handleCloseAddUser(a)}},"Cancel"))))))),p.a.createElement(E.a,null,p.a.createElement(b.a,{xl:12},p.a.createElement("nav",{className:"navbar m-b-10 p-10"},p.a.createElement("ul",{className:"nav"},p.a.createElement("li",{className:"nav-item f-text active"}),p.a.createElement("li",{className:"nav-item f-text active"})),p.a.createElement("div",{className:"nav-item nav-grid f-view"},p.a.createElement(h.a,{type:"button",style:{minWidth:"200px"},variant:"info",onClick:function(a){return e.handleAddUser(a)}},"Add User"))))),p.a.createElement(E.a,null,p.a.createElement(b.a,null,p.a.createElement(v.a,{title:"Users List"},p.a.createElement(w.a,Object.assign({noHeader:!0,responsive:!0,theme:"default"},this.state,{columns:i,paginationPerPage:2,className:"react-dataTable",data:this.state.data}))))))}}]),t}(u.Component);a.default=Object(f.b)((function(e){return{userList:e.userList,recordSaveStatus:e.recordSaveStatus,recordUpdateStatus:e.recordUpdateStatus,error:e.error,vesselList:e.vesselList}}),(function(e){return{getAllUserList:function(a){return e((t=a,function(e){e(k([])),A.a.get(x.a+"".concat("Employee","/GetAllEmployees?").concat(P.a.stringify(t)),M).then((function(a){console.log(a.data),Object(S.a)(a.data)?(e(V("Error fetching list of users")),e(G())):(e(k(a.data)),e(G()))})).catch((function(a){a.response?(e(V(a.response.data.message||"ERROR")),e(G())):(e(V("API Error. Please contact administrator.")),e(G()))}))}));var t},saveSingleUser:function(a){return e(H(a))},updateSingleUser:function(a){return e((t=a,function(e){A.a.post(x.a+"".concat("Employee","/UpdateEmployee"),t,M).then((function(a){var r,s=Object(L.a)(t.entries());try{for(s.s();!(r=s.n()).done;){var n=r.value;console.log(n[0]+", "+n[1])}}catch(l){s.e(l)}finally{s.f()}0===a.data.status?(e(D(a.data.message)),e(G())):(e(V(a.data.message)),e(G()))})).catch((function(a){a.response?(e(V(a.response.data.message||"ERROR")),e(G())):(e(V("API Error. Please contact administrator.")),e(G()))}))}));var t},deletUser:function(a){return e(function(e){return function(a){A.a.post(x.a+"".concat("Employee","/DeleteEmployee"),e,M).then((function(e){1==e.data?(a(D("User Data Deleted Successfully.")),a(G())):(a(V("User Delete Request Error. Please contact administrator.")),a(G()))})).catch((function(e){e.response?(a(V(e.response.data.message||"ERROR")),a(G())):(a(V("API Error. Please contact administrator.")),a(G()))}))}}(a))},getAllVesselList:function(a){return e(Object(K.b)(a))}}}))(_)},64:function(e,a,t){"use strict";t.d(a,"a",(function(){return r}));var r="https://shipsafe.azurewebsites.net/api/"},76:function(e,a,t){"use strict";t.d(a,"b",(function(){return E})),t.d(a,"c",(function(){return b})),t.d(a,"d",(function(){return N})),t.d(a,"a",(function(){return y}));var r=t(70),s=t.n(r),n=t(71),l=t.n(n),o=t(64),c=t(3),i=t(59),d=function(e){return{type:c.s,vesselList:e}},m=function(e){return{type:c.E,recordSaveStatus:e}},u=function(e){return{type:c.G,recordUpdateStatus:e}},p=function(e){return{type:c.k,error:e}},f=function(){return{type:c.g}},h={headers:{}},E=function(e){return function(a){a(d([])),s.a.get(o.a+"".concat("Vessel","/GetAllVessels?").concat(l.a.stringify(e)),h).then((function(e){console.log(e.data),Object(i.a)(e.data)?a(p("Error fetching list of vessels")):(console.log(e.data),a(d(e.data)))})).catch((function(e){e.response?a(p(e.response.data.message||"ERROR")):a(p("API Error. Please contact administrator."))}))}},b=function(e){return function(a){s.a.post(o.a+"".concat("Vessel","/AddVessel"),e,h).then((function(e){0===e.data.status?(a(m(e.data.message)),a(f())):(a(m(e.data)),a(f()))})).catch((function(e){console.log(e),e.response?a(p(e.response.data.message||"ERROR")):a(p("API Error. Please contact administrator."))}))}},N=function(e){return function(a){s.a.post(o.a+"".concat("Vessel","/UpdateVessel"),e,h).then((function(e){0===e.data.status?(a(u(e.data.message)),a(f())):(a(u(e.data)),a(f()))})).catch((function(e){e.response?a(p(e.response.data.message||"ERROR")):a(p("API Error. Please contact administrator."))}))}},y=function(e){return function(a){s.a.post(o.a+"".concat("Vessel","/DeleteVessel"),e,h).then((function(e){1==e.data?(a(u("Vessel Data Deleted Successfully.")),a(f())):a(p("Vessel Delete Request Error. Please contact administrator."))})).catch((function(e){e.response?a(p(e.response.data.message||"ERROR")):a(p("API Error. Please contact administrator."))}))}}},98:function(e,a,t){"use strict";var r=t(18),s=t(10),n=t(11),l=t(13),o=t(12),c=t(0),i=t.n(c),d=t(211),m=t(218),u=t(170),p=t(62),f=t.n(p),h=t(23),E=t(60),b=function(e){Object(l.a)(t,e);var a=Object(o.a)(t);function t(){var e;Object(s.a)(this,t);for(var r=arguments.length,n=new Array(r),l=0;l<r;l++)n[l]=arguments[l];return(e=a.call.apply(a,[this].concat(n))).state={isOption:e.props.isOption,fullCard:!1,collapseCard:!1,loadCard:!1,cardRemove:!1},e.cardReloadHandler=function(){e.setState({loadCard:!0}),setInterval((function(){e.setState({loadCard:!1})}),3e3)},e.cardRemoveHandler=function(){e.setState({cardRemove:!0})},e}return Object(n.a)(t,[{key:"render",value:function(){var e,a,t,s,n,l=this,o=[];return this.state.isOption&&(t=i.a.createElement("div",{className:"card-header-right"},i.a.createElement(d.a,{alignRight:!0,className:"btn-group card-option"},i.a.createElement(d.a.Toggle,{id:"dropdown-basic",className:"btn-icon"},i.a.createElement("i",{className:"feather icon-more-horizontal"})),i.a.createElement(d.a.Menu,{as:"ul",className:"list-unstyled card-option"},i.a.createElement(d.a.Item,{as:"li",className:"dropdown-item",onClick:function(){l.setState((function(e){return{fullCard:!e.fullCard}}))}},i.a.createElement("i",{className:this.state.fullCard?"feather icon-minimize":"feather icon-maximize"}),i.a.createElement("a",{href:E.a.BLANK_LINK}," ",this.state.fullCard?"Restore":"Maximize"," ")),i.a.createElement(d.a.Item,{as:"li",className:"dropdown-item",onClick:function(){l.setState((function(e){return{collapseCard:!e.collapseCard}}))}},i.a.createElement("i",{className:this.state.collapseCard?"feather icon-plus":"feather icon-minus"}),i.a.createElement("a",{href:E.a.BLANK_LINK}," ",this.state.collapseCard?"Expand":"Collapse"," ")),i.a.createElement(d.a.Item,{as:"li",className:"dropdown-item",onClick:this.cardReloadHandler},i.a.createElement("i",{className:"feather icon-refresh-cw"}),i.a.createElement("a",{href:E.a.BLANK_LINK}," Reload ")),i.a.createElement(d.a.Item,{as:"li",className:"dropdown-item",onClick:this.cardRemoveHandler},i.a.createElement("i",{className:"feather icon-trash"}),i.a.createElement("a",{href:E.a.BLANK_LINK}," Remove ")))))),s=i.a.createElement(m.a.Header,null,i.a.createElement(m.a.Title,{as:"h5"},this.props.title),t),this.state.fullCard&&(o=[].concat(Object(r.a)(o),["full-card"]),e={position:"fixed",top:0,left:0,right:0,width:this.props.windowWidth,height:this.props.windowHeight}),this.state.loadCard&&(o=[].concat(Object(r.a)(o),["card-load"]),a=i.a.createElement("div",{className:"card-loader"},i.a.createElement("i",{className:"pct-loader1 anim-rotate"}))),this.state.cardRemove&&(o=[].concat(Object(r.a)(o),["d-none"])),this.props.cardClass&&(o=[].concat(Object(r.a)(o),[this.props.cardClass])),n=i.a.createElement(m.a,{className:o.join(" "),style:e},s,i.a.createElement(u.a,{in:!this.state.collapseCard},i.a.createElement("div",null,i.a.createElement(m.a.Body,null,this.props.children))),a),i.a.createElement(h.a,null,n)}}]),t}(c.Component);a.a=f()(b)}}]);
//# sourceMappingURL=15.92d752c3.chunk.js.map