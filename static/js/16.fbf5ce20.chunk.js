(this["webpackJsonpship-stabi"]=this["webpackJsonpship-stabi"]||[]).push([[16],{187:function(e,t,a){"use strict";a.r(t);var l=a(117),s=a.n(l),n=a(118),r=a(26),i=a(1),o=a(10),c=a(11),d=a(13),u=a(12),m=a(0),v=a.n(m),p=a(24),b=a(140),f=a(185),h=a(122),E=a(213),C=a(23),O=a(131),g=a(80),j=a.n(g),S=a(81),V=a.n(S),y=a(93),N=a.n(y),w=a(59),F=a(82),x=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(){var e;return Object(o.a)(this,a),(e=t.call(this)).sweetAlertHandler=function(e){V()(j.a).fire({title:e.title,text:e.text,type:e.type})},e.handleDelete=function(t){var a=V()(j.a);a.fire({title:"Are you sure?",text:"Once deleted, you will not be able to recover this Vessel!",type:"warning",showCloseButton:!0,showCancelButton:!0}).then((function(l){if(!l.value)return a.fire("","Your Vessel record is safe!","error");var s=e.state.data.find((function(e){return e.ID===t})),n={ID:t};e.props.deletVessel(n);var r=e.state.data.indexOf(s);r>-1&&e.state.data.splice(r,1),e.setState({data:e.state.data})})).finally((function(){e.setState({isOpen:!0})}))},e.handleEdit=function(t){var a=e.state.data.find((function(e){return e.ID===t})),l={id:t,vesselCode:a.VesselCode,vesselName:a.VesselName};e.setState({vesselObj:l,isEditVesselCode:!1}),e.setState({isSearch:!1,isAdd:!0}),window.scrollTo({top:0,behavior:"smooth"})},e.handleAddVessel=function(t){e.clearValue(t),e.setState({isSearch:!1,isAdd:!0})},e.handleCloseAddVessel=function(t){e.clearValue(t),e.setState({isSearch:!0,isAdd:!1})},e.handleFormChange=function(t,a,l,s){try{var n=t.target,o=n.name,c=n.value;"configFile"==o||"loadingConditionFile"==o?(console.log(t.target.files),e.setState(Object(r.a)({},a,Object(i.a)(Object(i.a)({},e.state[a]),{},Object(r.a)({},o,t.target.files[0]))))):e.setState(Object(r.a)({},a,Object(i.a)(Object(i.a)({},e.state[a]),{},Object(r.a)({},o,c))))}catch(d){console.log(d)}},e.clearValue=function(t){e.setState({vesselObj:{id:"",vesselName:"",vesselCode:""},isEditVesselCode:!0})},e.handleSubmit=Object(n.a)(s.a.mark((function t(){var a,l,n,r;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:console.log(e.state.vesselObj.loadingConditionFile),a="",l="",null!=e.state.vesselObj.loadingConditionFile&&(Object(w.a)(e.state.vesselObj.loadingConditionFile.name)||(a=e.state.vesselObj.loadingConditionFile)),null!=e.state.vesselObj.configFile&&(Object(w.a)(e.state.vesselObj.configFile.name)||(l=e.state.vesselObj.configFile)),Object(w.a)(e.state.vesselObj.id)?Object(w.a)(e.state.vesselObj.vesselName)||Object(w.a)(e.state.vesselObj.vesselCode)||null==e.state.vesselObj.loadingConditionFile||null==e.state.vesselObj.configFile?e.sweetAlertHandler({title:"Error",text:"Please fill all required fileds",type:"error"}):(j.a.showLoading(),(n=new FormData).append("vesselName",e.state.vesselObj.vesselName),n.append("vesselCode",e.state.vesselObj.vesselCode),n.append("configFile",l),n.append("loadingConditionFile",a),e.props.saveSingleVessel(n)):(j.a.showLoading(),(r=new FormData).append("id",e.state.vesselObj.id),r.append("vesselName",e.state.vesselObj.vesselName),r.append("vesselCode",e.state.vesselObj.vesselCode),r.append("configFile",l),r.append("loadingConditionFile",a),e.props.updateSingleVessel(r));case 6:case"end":return t.stop()}}),t)}))),e.state={data:[],isSearch:!0,isAdd:!1,vesselObj:"",isEditVesselCode:!0},e.columns=[{name:"ID",selector:"ID",omit:!0},{name:"Actions",cell:function(t){return v.a.createElement(v.a.Fragment,null,v.a.createElement(b.a,{className:"btn btn-sm btn-info mr-1",outline:!0,onClick:function(){return e.handleEdit(t.ID)}},v.a.createElement("i",{className:"fa fa-edit"})),v.a.createElement(b.a,{className:"btn btn-sm btn-dark",outline:!0,onClick:function(){return e.handleDelete(t.ID)}},v.a.createElement("i",{className:"fa fa-trash"})))}},{name:"Vessel Code",selector:"VesselCode"},{name:"Vessel Name",selector:"VesselName"}],e}return Object(c.a)(a,[{key:"componentWillReceiveProps",value:function(e){Object(w.a)(e.vesselList)||this.setState({data:e.vesselList}),Object(w.a)(e.recordSaveStatus)||(999===e.recordSaveStatus.status?this.sweetAlertHandler({title:"Error",text:e.recordSaveStatus.message,type:"error"}):(this.sweetAlertHandler({title:"Success",text:e.recordSaveStatus,type:"success"}),setTimeout((function(){window.location.reload(!1)}),1800))),Object(w.a)(e.recordUpdateStatus)||(999===e.recordUpdateStatus.status?this.sweetAlertHandler({title:"Error",text:e.recordUpdateStatus.message,type:"error"}):(this.sweetAlertHandler({title:"Success",text:e.recordUpdateStatus,type:"success"}),setTimeout((function(){window.location.reload(!1)}),1800))),Object(w.a)(e.error)||this.sweetAlertHandler({title:"Error",text:e.error,type:"error"})}},{key:"componentDidMount",value:function(){this.props.getAllVesselList()}},{key:"render",value:function(){var e=this,t=this.state,a=t.isSearch,l=t.isAdd,s=t.vesselObj,n=t.isEditVesselCode,r=this.columns.map((function(t){return t.editable?Object(i.a)(Object(i.a)({},t),{},{onCell:function(t){return{record:t,editing:e.isEditing(t)}}}):t}));return v.a.createElement(C.a,null,v.a.createElement(f.a,null,v.a.createElement(h.a,null,a&&v.a.createElement(O.a,{title:"Search Vessel"},v.a.createElement(E.a.Row,null,v.a.createElement(E.a.Group,{as:h.a,md:"6"},v.a.createElement(E.a.Label,null,"Vessel Code"),v.a.createElement(E.a.Control,{type:"text",id:"vesselCode",placeholder:"Vessel Code"})),v.a.createElement(E.a.Group,{as:h.a,md:"6"},v.a.createElement(E.a.Label,null,"Vessel Name"),v.a.createElement(E.a.Control,{type:"text",id:"vesselName",placeholder:"Vessel Name"}))),v.a.createElement(E.a.Row,null,v.a.createElement(E.a.Group,{as:h.a,md:"12"},v.a.createElement("center",null,v.a.createElement(b.a,{type:"button",style:{minWidth:"200px"},variant:"info",className:"m-3",disabled:!0},"Search"),v.a.createElement(b.a,{style:{minWidth:"200px"},variant:"dark",className:"m-3",disabled:!0},"Clear"))))),l&&v.a.createElement(O.a,{title:"Manage Vessel"},v.a.createElement(E.a.Row,null,v.a.createElement(E.a.Group,{style:{display:"none"}},v.a.createElement(E.a.Label,null,"ID"),v.a.createElement(E.a.Control,{type:"text",id:"id",name:"id",onChange:function(t){return e.handleFormChange(t,"vesselObj")},value:s.id})),v.a.createElement(E.a.Group,{as:h.a,md:"3"},v.a.createElement(E.a.Label,null,"Vessel Code"),v.a.createElement(E.a.Control,{type:"text",id:"vesselCode",name:"vesselCode",placeholder:"Vessel Code",onChange:function(t){return e.handleFormChange(t,"vesselObj")},value:s.vesselCode,disabled:!n})),v.a.createElement(E.a.Group,{as:h.a,md:"3"},v.a.createElement(E.a.Label,null,"Vessel Name"),v.a.createElement(E.a.Control,{type:"text",id:"vesselName",name:"vesselName",placeholder:"Vessel Name",onChange:function(t){return e.handleFormChange(t,"vesselObj")},value:s.vesselName})),v.a.createElement(E.a.Group,{as:h.a,md:"3"},v.a.createElement(E.a.Label,null,"Upload Config File"),v.a.createElement(E.a.Control,{type:"file",accept:".geo",id:"configFile",name:"configFile",onChange:function(t){return e.handleFormChange(t,"vesselObj")}})),v.a.createElement(E.a.Group,{as:h.a,md:"3"},v.a.createElement(E.a.Label,null,"Upload Loading Condition File"),v.a.createElement(E.a.Control,{type:"file",accept:".lod",id:"loadingConditionFile",name:"loadingConditionFile",onChange:function(t){return e.handleFormChange(t,"vesselObj")}}))),v.a.createElement(E.a.Row,null,v.a.createElement(E.a.Group,{as:h.a,md:"12"},v.a.createElement("center",null,v.a.createElement(b.a,{type:"button",style:{minWidth:"200px"},variant:"info",className:"m-3",onClick:this.handleSubmit},"Save"),v.a.createElement(b.a,{style:{minWidth:"200px"},variant:"dark",className:"m-3",onClick:function(t){return e.handleCloseAddVessel(t)}},"Cancel"))))))),v.a.createElement(f.a,null,v.a.createElement(h.a,{xl:12},v.a.createElement("nav",{className:"navbar m-b-10 p-10"},v.a.createElement("ul",{className:"nav"},v.a.createElement("li",{className:"nav-item f-text active"}),v.a.createElement("li",{className:"nav-item f-text active"})),v.a.createElement("div",{className:"nav-item nav-grid f-view"},v.a.createElement(b.a,{type:"button",style:{minWidth:"200px"},variant:"info",onClick:function(t){return e.handleAddVessel(t)}},"Add Vessel"))))),v.a.createElement(f.a,null,v.a.createElement(h.a,null,v.a.createElement(O.a,{title:"Vessels List"},v.a.createElement(N.a,Object.assign({noHeader:!0,responsive:!0,theme:"default"},this.state,{columns:r,paginationPerPage:2,className:"react-dataTable",data:this.state.data}))))))}}]),a}(m.Component);t.default=Object(p.b)((function(e){return{vesselList:e.vesselList,recordSaveStatus:e.recordSaveStatus,recordUpdateStatus:e.recordUpdateStatus,error:e.error}}),(function(e){return{getAllVesselList:function(t){return e(Object(F.b)(t))},saveSingleVessel:function(t){return e(Object(F.c)(t))},updateSingleVessel:function(t){return e(Object(F.d)(t))},deletVessel:function(t){return e(Object(F.a)(t))}}}))(x)}}]);
//# sourceMappingURL=16.fbf5ce20.chunk.js.map